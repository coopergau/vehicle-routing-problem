#Example use in python
import vrp_solver
import random
import matplotlib.pyplot as plt
    
'''
Valid starting types:
vrp_solver.StartingType.Random
vrp_solver.StartingType.ClarkeWright
vrp_solver.StartingType.NearestNeighbours
vrp_solver.StartingType.Mixed
'''

def main():
    file = "routes.csv"
    num_customers = 50
    max_packages = 10
    population_size = 100
    generations = 1000
    mutation_prob = 0.5

    depot_x = random.uniform(100, 1000)
    depot_y = random.uniform(100, 1000)
    locations_x = [random.uniform(100, 1000) for _ in range(num_customers)]
    locations_y = [random.uniform(100, 1000) for _ in range(num_customers)]
    depot_x = 721.429897451894
    depot_y = 551.758868683348
    locations_x = [483.06130583736507, 323.47485303307576, 248.18722035288883, 552.0776503959173, 607.2065763167027, 524.8084939084713, 730.6646725684622, 627.2643087555025, 780.7099070020707, 179.98547940875272, 720.9900276584898, 929.6117441858479, 659.964234995571, 329.29545297149497, 624.4283601201748, 872.6076193589649, 983.206414828592, 879.964930950846, 755.8352492137294, 373.22547910542403, 227.868020433315, 443.62302114347693, 573.0365531424981, 219.58554823595838, 120.65606649721296, 704.9987663139543, 466.64199043873236, 547.3830777913548, 472.3678960992457, 707.6904641017483, 363.36046591815534, 915.7708323104933, 238.90427770632067, 130.3128815115418, 190.41432806763527, 203.09495150782465, 145.6690108597817, 215.53127265484835, 435.06734277449794, 175.77178947764173, 943.0758706647725, 629.3953745038838, 678.7038743961507, 700.6658752875416, 903.0730396171269, 634.7300874555572, 855.8806269017127, 499.0044393645763, 610.6529455671698, 392.8925778374837]
    locations_y = [428.0175277218217, 871.3301468957663, 458.7410778392227, 416.3520718922966, 863.5389563326138, 245.76029114693472, 171.10781397610674, 876.1780387247614, 189.66063141177952, 417.4958799262423, 933.9810936413085, 341.715842915106, 921.7022842162893, 742.0563321829, 277.6073154888433, 737.5368600966459, 573.939244890998, 823.8600448616936, 336.6333619160406, 597.8091819119961, 544.809580266357, 899.5810370282002, 995.5967770509998, 987.0594383414035, 855.6344385379539, 409.8559885281585, 382.1875404327407, 424.17782572911875, 127.35334817757811, 232.43786477577072, 199.84319000727305, 153.7400677505422, 731.3408741257147, 803.5944453490445, 702.4032682314935, 309.10169060886153, 139.55501649334133, 229.41761798546892, 288.76425503548495, 114.42721729818024, 478.3963782754336, 987.1684599292407, 306.8112805405829, 693.9592063254653, 698.7398817847172, 481.61168316858783, 399.1098991256784, 856.3580034342042, 381.3837380038732, 736.1861463859515]

    print(depot_x)
    print(depot_y)
    print(locations_x)
    print(locations_y)

    '''clarkeWrightSolution = vrp_solver.completeSolverClarkeWright(
        depot_x,
        depot_y,
        locations_x,
        locations_y,
        max_packages,
        True,
        file)
    
    '''
    geneticSolution = vrp_solver.completeSolverGenetic(
        depot_x,
        depot_y,
        locations_x,
        locations_y,
        max_packages,
        population_size,
        generations,
        mutation_prob,
        True,
        vrp_solver.StartingType.Mixed,
        file)

    locations = vrp_solver.get_locations(file)
    routes = vrp_solver.get_routes(file)
    anim = vrp_solver.plot_routes_animation(locations, routes, interval=100)
    anim.save("geneticMixed.gif", writer='pillow', fps=10)
    plt.show()

if __name__ == "__main__":
    main()